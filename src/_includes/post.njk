<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="{{ excerpt or site.description }}">
  <title>{{ title }} â€” {{ site.title }}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Cormorant+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <a href="#main" class="skip-link">Skip to content</a>

  {% include "nav.njk" %}

  <main id="main">
    <article class="post">
      <div class="container">
        <header class="post-header">
          <h1 class="post-title">{{ title }}</h1>
          <div class="post-meta">
            <time datetime="{{ date | isoDate }}">{{ date | readableDate }}</time>
            <span class="reading-time">{{ content | readingTime }}</span>
            {%- if postTags %}
            <span class="blog-tags">
              {%- for postTag in postTags %}
              <a href="/journal/tag/{{ postTag | slugify }}/" class="tag">{{ postTag }}</a>
              {%- endfor %}
            </span>
            {%- endif %}
          </div>
          {%- if featuredImage %}
          <figure class="post-featured-image">
            {% postImage featuredImage, title %}
          </figure>
          {%- endif %}
        </header>
        
        <div class="post-content">
          {{ content | safe }}
        </div>
        
        {% set related = collections.journal | relatedPosts(page, 3) %}
        {% if related.length > 0 %}
        <aside class="related-posts">
          <h3>Related Posts</h3>
          <ul>
            {% for post in related %}
            <li>
              <a href="{{ post.url }}">{{ post.data.title }}</a>
              <time datetime="{{ post.date | isoDate }}">{{ post.date | readableDate }}</time>
            </li>
            {% endfor %}
          </ul>
        </aside>
        {% endif %}

        <footer class="post-footer">
          <a href="/journal/" class="back-link">&larr; Back to Journal</a>
        </footer>
      </div>
    </article>
  </main>

  {% include "footer.njk" %}

  <script src="/js/script.js"></script>
</body>
</html>
